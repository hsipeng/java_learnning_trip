<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<script src="../js/jquery-1.4.2.js"></script>
		<script type="text/javascript">
			$(function(){
				//添加用户
				$("#addUser").click(function() {
					//思路 1.获取输入的值 2.创建 tr td 3.将数据填写到表单中
					var $id = $("#id").val();
					var $name = $("#name").val();
					var $email = $("#email").val();
					var $tel = $("#tel").val();
					// alert($email+":"+$tel);
					var idTd = $("<td>"+$id+"</td>");
					var nameTd = $("<td>"+$name+"</td>");
					var emailTd = $("<td>"+$email+"</td>");
					var telTd = $("<td>"+$tel+"</td>");
					
					var updateTd = $("<td>修改</td>").css("cursor","pointer");
					var delTd = $("<td>删除</td>").css("cursor","pointer");
					
					var tr = $("<tr id="+$id+" align='center'><td><input type='checkbox'/></td></tr>");
					tr.append(idTd).append(nameTd).append(emailTd).append(telTd).append(updateTd).append(delTd);
					$("#usertable").append(tr);
					
					
					//做删除操作
					delTd.click(function(){
						$(this).parent().remove();
					});
					
					
					//获取复选框  如果下边的复选框有一个没有选中 则全选按钮应该 取消选中
					$(":checkbox").click(function(){
						if(!$(this).attr("checked")){
							//下边的复选框 没有选中
							$("#allCheckbox").attr("checked",false);
						}
						
						/**
						 * 先判断全部复选框的个数，如果选中的个数和全部复选框的个数相同。全选框应该选中
						 */
						var number = $("#usertable :checkbox:not(#allCheckbox)").length;   //全部复选框的个数
						var checkNumber = $("#usertable :checked:not(#allCheckbox)").length;	//选中的个数
						
						if(number==checkNumber){
							$("#allCheckbox").attr("checked",true);
						
						}
					});
					
					
					
					
					
					
					//修改操作
					updateTd.click(function(){
						//通过兄弟获取ID的值
						var tr=$(this).parent();
						
						$("#id_update").val($id);
						$("#name_update").val($name);
						$("#email_update").val($email);
						$("#tel_update").val($tel);
					});
					
					});
					//修改提交
					$("#updateUser").click(function() {
						// alert("a")
						var id = $("#id_update").val();
						var name = $("#name_update").val();
						var email = $("#email_update").val();
						var tel = $("#tel_update").val();
						
						var tds = $("tr[id="+id+"]").children();
						tds.eq(2).text(name);
						tds.eq(3).text(email);
						tds.eq(4).text(tel);
						});
						
						//删除选中项
						$("#deleteUser").click(function() {
							//先找到选中的数据
							$("#usertable :checked:not(#allCheckbox)").parent().parent().remove();
							});
							
						//全选按钮的实现
						$("#allCheckbox").click(function() {
							$("#usertable :checkbox").attr("checked",$(this).attr("checked"));
							});
							
							});
			
		</script>
		<title>添加用户</title>
	</head>
	
	<body>
		<center>
			<br><br>
			添加用户:<br><br>
			ID:	<input type="text" name="id" id="id"/>&nbsp;&nbsp;
			姓名: <input type="text" name="name" id="name" />&nbsp;&nbsp;
			email: <input type="text" name="email" id="email" />&nbsp;&nbsp;
			电话: <input type="text" name="tel" id="tel" /><br><br>
			<button id="addUser">提交</button>
			<br><br>
			<hr>
			<br><br>
			<table id="usertable" border="1" cellpadding="5" cellspacing=0>
				<tr>
					<th><input type="checkbox" id="allCheckbox"/></th>
					<th>ID</th>
					<th>姓名</th>
					<th>email</th>
					<th>电话</th>
					<th>修改</th>
					<th>删除</th>
				</tr>
			</table>
			<button type="button" id="deleteUser">删除选中数据</button>
			<br>
			<br>
			<br>
			<hr>
			修改用户:<br><br>
			ID:<input type="text" name="name" id="id_update" readonly="readoonly"/>&nbsp;&nbsp;
			姓名: <input type="text" name="name" id="name_update" />&nbsp;&nbsp;
			email: <input type="text" name="email" id="email_update" />&nbsp;&nbsp;
			电话: <input type="text" name="tel" id="tel_update" /><br><br>
			<input type="hidden" id="id_update"/>
			<button id="updateUser">提交</button>
		</center>
	</body>
</html>

