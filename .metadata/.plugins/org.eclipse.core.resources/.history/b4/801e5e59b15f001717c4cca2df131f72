<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>留言板</title>
</head>
<body onload="showList()">
<div>欢迎：</div>
<div id="commentsList" >
<div class="addComment">
<form id="formComment">
  添加评论：<br />
 <textarea name="content"></textarea><br />
    <button id="btnNewComment">提交</button>
</form>
</div>
</div>
</body>
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://malsup.github.io/jquery.form.js"></script>
<script type="text/javascript">
function showList(){
	var clist  ='<%=session.getAttribute("clist") %>';
	var json= JSON.parse(clist)
	console.log(json);
	var commentslist = document.getElementById("commentsList");
	var p="";
	  for(var i in json)  
	  {  
		  p+="<p> <span>"+json[i].publishTime+"</span><br/><h1>"+json[i].content+"</h1>"+"<p>";
		  console.log(json[i]);
	  }  
	//console.log(p);
	commentslist.innerHTML=p;
}


</script>
<script type="text/javascript">
$('#btnNewComment').on('click', function() {

    $('#formComment').on('submit', function() {
        var  content = $('textarea').val();

        $(this).ajaxSubmit({
            type: 'post', // 提交方式 get/post
            url: 'your url', // 需要提交的 url
            data: {
                'title': title,
                'content': content
            },
            success: function(data) { // data 保存提交后返回的数据，一般为 json 数据
                // 此处可对 data 作相关处理
                console('提交成功！');
            $(this).resetForm(); // 提交后重置表单
            }
        });
        return false; // 阻止表单自动提交事件
    });
});
</script>
</html>